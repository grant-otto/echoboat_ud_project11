<launch>
    <arg name="namespace" default="echo"/>
    <arg name="operator_ip" default="10.42.0.1"/>
    <arg name="logDirectory"/>
    
    <include file="$(find echoboat_ud_project11)/launch/robot_core_echo.launch">
        <arg name="namespace" value="$(arg namespace)"/>
        <arg name="yaml_path" value="$(find echoboat_ud_project11)/config/echoboat_ud.yaml"/>
    </include>

    <node pkg="echo_helm" type="" name="echo_helm_node" ns="$(arg namespace)"/>

    <node pkg="mru_transform" type="sensor_sync_node" name="sensor_sync" ns="$(arg namespace)">
    	<param name="outTopicPrefix" value="sensors/mru/"/>
    	<remap from="in/position" to="/imu/nav_sat_fix"/>
    	<remap from="in/orientation" to="/imu/data"/>
    	<remap from="in/velocity" to="/imu/velocity"/>
    	
    	<!--uncomment below when not using the SBG-->
    	<remap from="in/position" to="mavros/global_position/global"/> -->
<!--     <remap from="in/orientation" to="mavros/imu/data"/> -->
<!--     <remap from="in/velocity" to="mavros/global_position/raw/gps_vel"/> -->
    	
    </node>

<!--arg name="fcu_url" default="/dev/ttyUSB0:57600" /--> <!-- Port et baudrate of the connexion with Pixhawk -->
    <!-- <arg name="fcu_url" default="udp://:14651@192.168.88.8" />--> <!-- Port et baudrate of the connexion with Pixhawk -->
    <arg name="fcu_url" default="/dev/ttyUSB0:57600" /> <!-- Port et baudrate of the connexion with Pixhawk -->
    <arg name="gcs_url" default="" /> <!-- Retransmission to a GCS like Mavproxy does -->
    <arg name="tgt_system" default="1" /> <!-- Mavlink id of your drone, default is 1 -->
    <arg name="tgt_component" default="1" /> <!-- Mavlink component id of your drone, default is 1 -->
    <arg name="log_output" default="screen" /> <!-- Where ROS will ouput its message, screen is your current terminal -->

    <include file="$(find mavros)/launch/node.launch"> <!-- This launch file will launch another launch file -->
        <arg name="pluginlists_yaml" value="$(find mavros)/launch/apm_pluginlists.yaml" /> <!-- Mavros plugin configuration, we will modify that later -->
        <arg name="config_yaml" value="$(find mavros)/launch/apm_config.yaml" /> <!-- Mavros plugin list to use -->

        <arg name="fcu_url" value="$(arg fcu_url)" /> <!-- Pass the parameter to the other launch file -->
        <arg name="gcs_url" value="$(arg gcs_url)" />
        <arg name="tgt_system" value="$(arg tgt_system)" />
        <arg name="tgt_component" value="$(arg tgt_component)" />
        <arg name="log_output" value="$(arg log_output)" />
    </include>

    <param name="/$(arg namespace)/udp_bridge/remotes/operator/host" value="$(arg operator_ip)"/>
    
<!--uncomment below when not using the SBG -->
  <node name="sbg_ellipseD" pkg="sbg_driver" type="sbg_device" output="screen">
    <rosparam command="load" file="$(echoboat_ud_project11/config/ellipse_D_echo_final.yaml" />
  </node>
  
<!--<include file="$(find ben_hardware)/launch/loggers.launch">
        <arg name="namespace" value="$(arg namespace)"/>
        <arg name="logDirectory" value="$(arg logDirectory)"/>
    </include>-->
    
    <!--<include if="$(arg log_lidar)" file="$(find ben_project11)/launch/log_lidar.launch">
        <arg name="namespace" value="$(arg namespace)"/>
        <arg name="logDirectory" value="$(arg logDirectory)"/>
    </include>-->

</launch>
